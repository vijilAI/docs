---
title: "Approving Deployments"
description: "Deploy genome changes with confidence—staged rollouts, validation, and monitoring."
---

## From Approval to Production

Approving a genome change creates a new version. But creating a version and deploying it are separate steps. This separation gives you control over when and how changes reach production.

## The Deployment Flow

```
Darwin proposes change
        │
        ▼
    [Review]
        │
        ▼
   You approve
        │
        ▼
  New version created (v4)
        │
        ├──► Deploy to staging
        │           │
        │           ▼
        │      Validate
        │           │
        │           ▼
        └──► Deploy to production
                    │
                    ▼
               Observe
```

You control each transition. Nothing reaches production without explicit authorization.

## Deployment Options

When approving a change, you choose the deployment path:

### Deploy to Staging First

Recommended for significant changes or risk-sensitive agents.

1. **Approve** the genome change
2. **Deploy to staging** environment
3. **Validate** behavior with test traffic
4. **Run evaluation** in staging to confirm fitness improvement
5. **Promote to production** if validation passes

```
v3 (production) ────────────────────────► v3 (production)
                                              │
v4 (approved) ──► v4 (staging) ──► validate ──┴──► v4 (production)
```

### Deploy Directly to Production

For low-risk changes or agents with high Darwin confidence.

1. **Approve** the genome change
2. **Deploy to production** immediately
3. **Monitor** through Dome observability
4. **Rollback** if issues detected

<Warning>
Direct deployment is faster but riskier. Use only when you have:
- High confidence in Darwin's recommendations
- Strong observability and alerting
- Fast rollback capability
- Low-impact agents (internal tools, low-traffic)
</Warning>

### Approve Without Deploying

Sometimes you want to approve a change but defer deployment.

1. **Approve** the genome change
2. New version is created but **not deployed**
3. Deploy later during a maintenance window
4. Use for coordinated releases or change freezes

## Validation in Staging

Before promoting to production, validate the change:

### Run Focused Evaluation

```bash
vijil evaluate \
  --agent customer-service-agent \
  --genome-version 4 \
  --harness reliability \
  --environment staging
```

Compare results to the previous version:

| Metric | v3 (current) | v4 (proposed) | Delta |
|--------|--------------|---------------|-------|
| Trust Score | 82.3 | 87.1 | +4.8 |
| Hallucination Rate | 23% | 11% | -12% |
| Response Latency | 1.2s | 1.1s | -0.1s |

### Test Critical Paths

Manually test scenarios that matter most:
- Common user queries
- Edge cases that previously failed
- Compliance-critical interactions

### Check for Regressions

Ensure the change didn't break something else:
- Run full test suite
- Compare behavior on baseline scenarios
- Verify integrations still work

## Production Deployment

When ready to deploy:

### Pre-Deployment Checklist

- [ ] Staging validation passed
- [ ] Evaluation shows improvement
- [ ] No regressions detected
- [ ] Rollback plan confirmed
- [ ] Monitoring alerts configured
- [ ] Team notified

### Deployment Methods

| Method | Use Case |
|--------|----------|
| **Instant** | Replace current version immediately |
| **Canary** | Route 5-10% of traffic to new version |
| **Blue-Green** | Run both versions, switch when confident |

### Canary Deployment

For critical agents, canary deployment minimizes risk:

1. Deploy v4 alongside v3
2. Route 5% of traffic to v4
3. Monitor for 1-24 hours
4. If metrics look good, increase to 25%, then 50%, then 100%
5. If issues detected, route all traffic back to v3

```
Traffic ──┬── 95% ──► v3 (current)
          │
          └── 5%  ──► v4 (canary)
```

## Post-Deployment Monitoring

After deployment, observe:

### Immediate (0-1 hour)
- Error rates
- Latency
- User complaints
- Anomaly alerts

### Short-term (1-24 hours)
- Trust Score in production
- Hallucination rate
- User satisfaction metrics
- Business KPIs

### Long-term (1-7 days)
- Trend analysis
- Edge case handling
- Comparison to pre-change baseline

## Coordinating Approvals

For teams with multiple approvers:

### Single Approver
- Any authorized owner can approve
- Suitable for smaller teams or lower-risk agents

### Dual Approval
- Requires two owners to approve
- One from business, one from risk/security
- Suitable for high-risk or compliance-critical agents

### Approval Delegation
- Set up approval rules by change type
- Example: Auto-approve temperature changes, require manual approval for prompt changes

## Documentation

Every deployment is recorded:

```json
{
  "deployment_id": "deploy-456",
  "genome_id": "abc-123",
  "from_version": 3,
  "to_version": 4,
  "deployed_by": "jane@company.com",
  "deployed_at": "2024-01-15T14:30:00Z",
  "environment": "production",
  "method": "instant",
  "approval_id": "approval-789"
}
```

This creates the audit trail connecting:
- Who approved the change
- Who deployed it
- When and how it was deployed
- What version was replaced

## Deployment Policies

Configure organizational policies for deployments:

| Policy | Example Setting |
|--------|-----------------|
| **Staging required** | All changes must pass staging |
| **Minimum soak time** | 24 hours in staging before production |
| **Blackout windows** | No deployments Friday 3pm - Monday 9am |
| **Change freeze** | No deployments during incident response |
| **Approval expiry** | Approved changes must deploy within 7 days |

## Next Steps

<CardGroup cols={2}>
  <Card title="Rollback & History" icon="clock-rotate-left" href="/owner-guide/review-evolution/rollback-and-history">
    Revert changes when needed
  </Card>
  <Card title="Observability" icon="chart-mixed" href="/owner-guide/protect-in-production/observability">
    Monitor deployed changes
  </Card>
</CardGroup>
