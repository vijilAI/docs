<!doctype html>
<html class="no-js" lang="en" data-content_root="../../">
  <head><meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../../genindex.html"><link rel="search" title="Search" href="../../search.html"><link rel="next" title="Evaluating Agents with Custom Endpoints" href="local-agent-evaluations.html"><link rel="prev" title="Working with Detections" href="detections.html">
        <link rel="prefetch" href="../../_static/vijil_wide.png" as="image">

    <link rel="shortcut icon" href="https://assets-global.website-files.com/656632658074164265ceea17/6570d66fa750acafb3a837ac_favicon.png"><!-- Generated with Sphinx 8.2.3 and Furo 2025.09.25 -->
        <title>Custom Harnesses - Vijil Docs</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=d111a655" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?v=580074bf" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css?v=4c969af8" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?v=8dab3a3b" />
    
    


<style>
  body {
    --color-code-background: #f2f2f2;
  --color-code-foreground: #1e1e1e;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle site navigation sidebar">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc" aria-label="Toggle table of contents sidebar">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <span class="icon"><svg><use href="#svg-menu"></use></svg></span>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">Vijil Docs</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../index.html">
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../../_static/vijil_wide.png" alt="Logo"/>
  </div>
  
  
</a><form class="sidebar-search-container" method="get" action="../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="../../setup.html">Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../quickstart.html">Quickstart Tutorial</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Evaluating Agents</span></p>
<ul class="current">
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">Tutorials</a><input aria-label="Toggle navigation of Tutorials" checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="agents.html">Add, Update, and Delete Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="api-keys.html">Managing API keys</a></li>
<li class="toctree-l2"><a class="reference internal" href="evaluations.html">Evaluations</a></li>
<li class="toctree-l2"><a class="reference internal" href="owasp.html">OWASP LLM Top 10 Harness</a></li>
<li class="toctree-l2"><a class="reference internal" href="rag.html">RAG metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="detections.html">Working with Detections</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Custom Harnesses</a></li>
<li class="toctree-l2"><a class="reference internal" href="local-agent-evaluations.html">Evaluating Agents with Custom Endpoints</a></li>
<li class="toctree-l2"><a class="reference internal" href="reports.html">Evaluation Reports</a></li>
<li class="toctree-l2"><a class="reference internal" href="playground.html">Playground</a></li>
<li class="toctree-l2"><a class="reference internal" href="cicd.html">Integrating Vijil Evaluate into CI/CD</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../integrations/index.html">Integrations</a><input aria-label="Toggle navigation of Integrations" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../integrations/vertex.html">Google Vertex AI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../integrations/digitalocean.html">DigitalOcean</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../integrations/bedrock.html">AWS Bedrock</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../integrations/custom.html">Custom Endpoints</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../integrations/local.html">Local LLMs and Agents</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../tests-library/index.html">Dimensions of Trust</a><input aria-label="Toggle navigation of Dimensions of Trust" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../tests-library/security.html">Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tests-library/privacy.html">Privacy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tests-library/hallucination.html">Hallucination</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tests-library/robustness.html">Robustness</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tests-library/toxicity.html">Toxicity</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tests-library/stereotype.html">Stereotype</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tests-library/fairness.html">Fairness</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tests-library/ethics.html">Ethics</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../components/index.html">Trust Score Components</a><input aria-label="Toggle navigation of Trust Score Components" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../components/harnesses.html">Harnesses</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../components/scenarios.html">Scenarios</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../components/probes.html">Probes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../components/detectors.html">Detectors</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../glossary/index.html">Glossary</a><input aria-label="Toggle navigation of Glossary" class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../glossary/detectors.html">Detector Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../glossary/probes.html">Probe Glossary</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../api.html">API Reference</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Protecting Agents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../dome/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dome/gettingstarted.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dome/overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dome/config.html">Configuring Guardrails</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../dome/guards/index.html">List of Detection Methods</a><input aria-label="Toggle navigation of List of Detection Methods" class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../dome/guards/security.html">Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../dome/guards/moderation.html">Moderation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../dome/guards/privacy.html">Privacy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../dome/guards/integrity.html">Integrity</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../dome/tutorials/index.html">Tutorials</a><input aria-label="Toggle navigation of Tutorials" class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../dome/tutorials/guardrails.html">Using Guardrails</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../dome/tutorials/domed-clients.html">Applying Dome to Clients</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../dome/tutorials/langchain.html">Langchain Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../dome/tutorials/adk.html">Google ADK Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../dome/tutorials/custom-detectors.html">Custom Detectors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../dome/tutorials/observability.html">Observability</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../dome/integrations.html">Integrations</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Enterprise Deployment of Evaluate</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../enterprise_deployment/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../enterprise_deployment/pre-requisites.html">Pre-requisites</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../enterprise_deployment/deploying.html">Deploying Vijil Evaluate with Helm</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../../_sources/evaluate/examples/custom-harness.md.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="custom-harnesses">
<h1>Custom Harnesses<a class="headerlink" href="#custom-harnesses" title="Link to this heading">¶</a></h1>
<p>While Vijil has a variety of pre-configured <a class="reference internal" href="../../components/harnesses.html"><span class="std std-doc">harnesses</span></a> that you can select from, you can also create your own harnesses in order to obtain a trust score specific to your organization and agent.</p>
<section id="view-custom-harnesses">
<h2>View Custom Harnesses<a class="headerlink" href="#view-custom-harnesses" title="Link to this heading">¶</a></h2>
<p>You can view previously created custom harnesses by navigating to <strong>Harnesses</strong> in the left sidebar.</p>
<p>To view the prompts in a custom harness, click on its row in the <strong>Harnesses</strong> table.</p>
</section>
<section id="python-client">
<h2>Python Client<a class="headerlink" href="#python-client" title="Link to this heading">¶</a></h2>
<p>The following example assumes that you have already initialized a Vijil <a class="reference internal" href="../../quickstart.html"><span class="std std-doc">client</span></a> named <code class="docutils literal notranslate"><span class="pre">client</span></code>.</p>
<section id="policy-document-s">
<h3>Policy Document(s)<a class="headerlink" href="#policy-document-s" title="Link to this heading">¶</a></h3>
<p>You can create a custom policy adherence harness that checks whether your model adheres to its system prompt or an organizational policy. To do this, you need a system prompt specified as a string, and an optional organizational policy provided as a <code class="docutils literal notranslate"><span class="pre">.txt</span></code> or <code class="docutils literal notranslate"><span class="pre">.pdf</span></code> file. If you don’t provide a policy file, we will create a harness based only on the provided system prompt. To specify that you want a policy adherence harness, you need to specify the <code class="docutils literal notranslate"><span class="pre">category</span></code> argument as <code class="docutils literal notranslate"><span class="pre">[&quot;AGENT_POLICY&quot;]</span></code>.</p>
<p>The following examples uses the <code class="docutils literal notranslate"><span class="pre">harnesses.create</span></code> function to create a harness to test adherence against the NIST <a class="reference external" href="https://nvlpubs.nist.gov/nistpubs/ai/nist.ai.100-1.pdf">AI Risk Management</a> framework.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">harness_creation_job</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">harnesses</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
    <span class="n">harness_name</span><span class="o">=</span><span class="s2">&quot;NIST AI RMF harness&quot;</span><span class="p">,</span>
    <span class="n">system_prompt</span><span class="o">=</span><span class="s2">&quot;You are a helpful assistant.&quot;</span><span class="p">,</span> 
    <span class="n">policy_file_path</span><span class="o">=</span><span class="s2">&quot;nist.ai.100-1.pdf&quot;</span><span class="p">,</span>
    <span class="n">category</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;AGENT_POLICY&quot;</span><span class="p">]</span>
<span class="p">)</span>
<span class="c1"># {&#39;harness_name&#39;: &#39;NIST AI RMF harness&#39;, &#39;harness_config_id&#39;: &#39;816725ab-c101-4380-b8d4-92fcc367cf6d&#39;, &#39;status&#39;: &#39;CREATED&#39;}</span>
</pre></div>
</div>
<p>You can use the <code class="docutils literal notranslate"><span class="pre">get_status</span></code> command to know the status of a harness creation job.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">client</span><span class="o">.</span><span class="n">harnesses</span><span class="o">.</span><span class="n">get_status</span><span class="p">(</span><span class="n">harness_id</span><span class="o">=</span><span class="n">harness</span><span class="p">[</span><span class="s1">&#39;harness_config_id&#39;</span><span class="p">])</span>
<span class="c1"># {&#39;created_by&#39;: &#39;f6e0b128-c075-4bc3-91da-34d03fa6c67e&#39;,</span>
<span class="c1">#  &#39;created_at&#39;: 1741819347,</span>
<span class="c1">#  &#39;id&#39;: &#39;654289d2-d4c4-40fb-b893-120ab3978a69&#39;,</span>
<span class="c1">#  &#39;harness_config_id&#39;: &#39;85482e8b-a8b4-4cac-a4a2-92b4f4f6e56e&#39;,</span>
<span class="c1">#  &#39;harness_name&#39;: &#39;NIST AI RMF harness&#39;,</span>
<span class="c1">#  &#39;team_id&#39;: &#39;00ccc042-1b41-4f02-ae5f-6a09b5e6e844&#39;,</span>
<span class="c1">#  &#39;status&#39;: &#39;COMPLETED&#39;,</span>
<span class="c1">#  &#39;status_message&#39;: &#39;Harness NIST AI RMF harness updated successfully!&#39;,</span>
<span class="c1">#  &#39;agent_system_prompt&#39;: &#39;you are a helpful assistant&#39;,</span>
<span class="c1">#  &#39;started_at&#39;: None,</span>
<span class="c1">#  &#39;completed_at&#39;: None,</span>
<span class="c1">#  &#39;harness_config_version&#39;: &#39;1.0.0&#39;}</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">harness_config_version</span></code> starts at 1.0.0 for any harness of the given harness name. If you create another harness with the same name, vijil automatically increments the harness version, e.g. from 1.0.0 to 1.0.1. In the above example, we assume that <code class="docutils literal notranslate"><span class="pre">NIST</span> <span class="pre">AI</span> <span class="pre">RMF</span> <span class="pre">harness</span></code> is a new harness name, so we set the version to 1.0.0.</p>
<p>Once the harness is created, you can <a class="reference internal" href="evaluations.html#create-an-evaluation"><span class="std std-ref">run an evaluation</span></a> with it:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">client</span><span class="o">.</span><span class="n">evaluations</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
    <span class="n">harnesses</span><span class="o">=</span><span class="p">[</span><span class="n">harness_creation_job</span><span class="p">[</span><span class="s1">&#39;harness_config_id&#39;</span><span class="p">]],</span>
    <span class="n">model_hub</span><span class="o">=</span><span class="n">your_model_hub</span><span class="p">,</span>
    <span class="n">model_name</span><span class="o">=</span><span class="n">your_model</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="knowledge-base-enterprise-only">
<h3>Knowledge Base (Enterprise Only)<a class="headerlink" href="#knowledge-base-enterprise-only" title="Link to this heading">¶</a></h3>
<p>If you are developing a RAG agent and would like to generate a custom test harness to evaluate generation and retrieval capabilities based on a set of document chunks, upload the documents that you’d like to base the evaluation on into a GCP storage bucket and use the following command. To specify that you want a RAG harness, set the <code class="docutils literal notranslate"><span class="pre">category</span></code> parameter to <code class="docutils literal notranslate"><span class="pre">[&quot;KNOWLEDGE_BASE&quot;]</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">harness_creation_job</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">harnesses</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
    <span class="n">harness_name</span><span class="o">=</span><span class="s2">&quot;Your KB harness&quot;</span><span class="p">,</span>
    <span class="n">system_prompt</span><span class="o">=</span><span class="s2">&quot;You are a RAG agent that answers questions based on a knowledge base.&quot;</span><span class="p">,</span> 
    <span class="n">kb_bucket</span><span class="o">=</span><span class="s2">&quot;your_bucket_name&quot;</span><span class="p">,</span>
    <span class="n">category</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;KNOWLEDGE_BASE&quot;</span><span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="tool-calling-agent-enterprise-only">
<h3>Tool Calling Agent (Enterprise Only)<a class="headerlink" href="#tool-calling-agent-enterprise-only" title="Link to this heading">¶</a></h3>
<p>To evaluate a tool calling agent, you need to supply input and output schemas for a function that you want to generate test prompts based on, as well as an endpoint to call that function. To specify that you want a tool calling harness, set the <code class="docutils literal notranslate"><span class="pre">category</span></code> parameter to <code class="docutils literal notranslate"><span class="pre">[&quot;FUNCTION_ROUTE&quot;]</span></code>.</p>
<p>For example, you are calling a <code class="docutils literal notranslate"><span class="pre">calculator</span></code> function to compute the sum of two numbers <code class="docutils literal notranslate"><span class="pre">num1</span></code> and <code class="docutils literal notranslate"><span class="pre">num2</span></code>, and returns the variable <code class="docutils literal notranslate"><span class="pre">result</span></code>. Thus input and output schema are</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">input_schema</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">&quot;num1&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">,</span>
    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;the first number&quot;</span>
  <span class="p">},</span>
  <span class="s2">&quot;num2&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">,</span>
    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;the second number&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="n">output_schema</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">,</span>
    <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;The final result&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In addition, suppose the variable <code class="docutils literal notranslate"><span class="pre">function_route</span></code> stores the URL required to call the function with the two arguments and return the result. Then, the following command creates a harness creation job.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">harness_creation_job</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">harnesses</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
    <span class="n">harness_name</span><span class="o">=</span><span class="s2">&quot;Your tool calling harness&quot;</span><span class="p">,</span>
    <span class="n">system_prompt</span><span class="o">=</span><span class="s2">&quot;You are a calculator agent that calls a function to calculate the sum of two numbers.&quot;</span><span class="p">,</span> 
    <span class="n">input_schema</span> <span class="o">=</span> <span class="n">input_schema</span><span class="p">,</span>
    <span class="n">output_schema</span> <span class="o">=</span> <span class="n">input_schema</span><span class="p">,</span>
    <span class="n">function_route</span> <span class="o">=</span> <span class="n">function_route</span><span class="p">,</span>
    <span class="n">category</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;FUNCTION_ROUTE&quot;</span><span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="custom-harness-with-multple-components">
<h3>Custom Harness with Multple Components<a class="headerlink" href="#custom-harness-with-multple-components" title="Link to this heading">¶</a></h3>
<p>In the above examples we specified only one value in <code class="docutils literal notranslate"><span class="pre">category</span></code>, but you can also create a harness that contains multiple components. For example, you can create a harness that contains a knowledge base component and a tool calling agent component, or any of those components together with a policy adherence component. To do this, specify multiple values in <code class="docutils literal notranslate"><span class="pre">category</span></code>. For example, to create a harness with all three components, use <code class="docutils literal notranslate"><span class="pre">category=[&quot;KNOWLEDGE_BASE&quot;,</span> <span class="pre">&quot;FUNCTION_ROUTE&quot;,</span> <span class="pre">&quot;POLICY_ADHERENCE&quot;]</span></code>.</p>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="local-agent-evaluations.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Evaluating Agents with Custom Endpoints</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="detections.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Working with Detections</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024, Vijil Inc
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Custom Harnesses</a><ul>
<li><a class="reference internal" href="#view-custom-harnesses">View Custom Harnesses</a></li>
<li><a class="reference internal" href="#python-client">Python Client</a><ul>
<li><a class="reference internal" href="#policy-document-s">Policy Document(s)</a></li>
<li><a class="reference internal" href="#knowledge-base-enterprise-only">Knowledge Base (Enterprise Only)</a></li>
<li><a class="reference internal" href="#tool-calling-agent-enterprise-only">Tool Calling Agent (Enterprise Only)</a></li>
<li><a class="reference internal" href="#custom-harness-with-multple-components">Custom Harness with Multple Components</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/scripts/furo.js?v=46bd48cc"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/tabs.js?v=3ee01567"></script>
    </body>
</html>